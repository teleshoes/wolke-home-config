#!/usr/bin/perl
use strict;
use warnings;

my $usage ="Usage:
  $0 -h|--help
    show this message

  $0 APK_FILE [APK_FILE ..]
    show apk info with aapt
";

sub main(@){
  my @apkFiles;
  while(@_ > 0){
    my $arg = shift;
    if($arg =~ /^(-h|--help)$/){
      print $usage;
      exit 0;
    }elsif(-f $arg){
      push @apkFiles, $arg;
    }else{
      die "ERROR: unknown arg $arg\n";
    }
  }

  die "ERROR: at least one APK_FILE is required\n" if @apkFiles == 0;

  for my $apkFile(@apkFiles){
    system "aapt dump badging \"$apkFile\" | head -3";
  }
}

&main(@ARGV);
