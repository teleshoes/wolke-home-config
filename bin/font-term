#!/usr/bin/perl
use strict;
use warnings;

my $xftTypeface = "Inconsolata";
my $defaultPx = 16;

my $usage = "USAGE:
  $0 -h | --help
    show this message

  $0 FONT_SIZE_PX
    set the font size in pixels using typeface: $xftTypeface
      prints this <FONT_STRING> to the console:
        xft:$xftTypeface:pixelsize=<FONT_SIZE_PX>
      using:
        echo -ne '\\033]710;<FONT_STRING>\\033\\\\'
";

sub main(@){
  my $px = $defaultPx;
  while(@_ > 0){
    my $arg = shift @_;
    if($arg =~ /^(-h|--help)$/){
      print $usage;
      exit 0;
    }elsif($arg =~ /^(\d+|\d*\.\d+)$/){
      $px = $1;
    }else{
      die $usage;
    }
  }
  my $font = "xft:$xftTypeface:pixelsize=$px";
  my @cmd = ("echo", "-ne", "\\033]710;$font\\033\\\\");
  print "@cmd\n";
  system @cmd;
}

&main(@ARGV);
