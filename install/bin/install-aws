#!/usr/bin/perl
use strict;
use warnings;
use lib `dirname $0 | tr -d '\n'`;
use ScriptScript;

sub main(@) {
  die "Usage: $0\n" if @_ > 0;

  my $tmpDir = "/tmp/awscli-install-" . nowMillis();

  run "mkdir", $tmpDir;
  my $zip = "$tmpDir/awscliv2.zip";

  run "curl", "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip",
    "-o", $zip;
  run "unzip", "-d", $tmpDir, $zip;

  run "sudo", $tmpDir/aws/install";
  run "rm", "-rf", $tmpDir;
}

&main(@ARGV);
