#!/usr/bin/perl
use strict;
use warnings;
use lib `dirname $0 | tr -d '\n'`;
use ScriptScript;

sub main(@){
#  run "sudo", "apt-get", "install", "arduino";

  my $home = getHome();
  my $user = getUsername();
  my $libDir = "$home/Arduino/libraries";

  installFromGit "https://github.com/arduino/arduino-cli", ''
      . " rm -f ~/.cache/go-build/trim.txt; "
      . " go build && GOBIN=$home/bin go install; "
  ;

  print "\n";

  run "arduino-cli", "core", "install", "arduino:avr";

  run "mkdir", "-p", $libDir;

  installFromGit("https://github.com/cyborg5/IRLib2",
    "rsync -avP ./IRLib* $libDir"
  );
}

&main(@ARGV);
