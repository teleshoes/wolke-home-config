#!/usr/bin/perl
use strict;
use warnings;
use lib `dirname $0 | tr -d '\n'`;
use ScriptScript;
use File::Basename qw(basename);

my $EXEC = basename $0;

my $PYTHON_VENV_DIR = "/opt/pylitterbot-venv";

my $USAGE = "Usage:
  $EXEC -h|--help
    show this message

  $EXEC
    -create python VENV and install pylitterbot at:
      $PYTHON_VENV_DIR
";

sub main(@){
  while(@_ > 0){
    my $arg = shift;
    if($arg =~ /^(-h|--help)$/){
      print $USAGE;
      exit 0;
    }else{
      die "ERROR: unknown arg $arg\n";
    }
  }

  runSudo "rm", "-rf", $PYTHON_VENV_DIR;
  runSudo "python3", "-m", "venv", $PYTHON_VENV_DIR;
  runSudo "$PYTHON_VENV_DIR/bin/pip", "install", "pylitterbot";
}

&main(@ARGV);
