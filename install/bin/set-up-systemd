#!/usr/bin/perl
use strict;
use warnings;
use lib `dirname $0 | tr -d '\n'`;
use ScriptScript;

my $LOGIND_CONF_FILE = "/etc/systemd/logind.conf";
my $JOURNALD_CONF_FILE = "/etc/systemd/journald.conf";

sub main(@) {
  getRoot @_;

  runAptGet "remove", "sysvinit-core";
  runAptGet "install", "systemd-sysv";

  editFileSimpleConf $LOGIND_CONF_FILE, {
    KillUserProcesses => "no",
    HandlePowerKey => "ignore",
    HandleSuspendKey => "ignore",
    HandleHibernateKey => "ignore",
    HandleLidSwitch => "ignore",
  };

  editFileSimpleConf $JOURNALD_CONF_FILE, {
    SystemMaxUse => "100M",
  };
}

&main(@ARGV);
